# 登入校验

## Filter

#### 概述：



## 拦截器（Interceptor)

#### 概述：

- 概念：拦截器是一种动态拦截方法调用的机制，类似与过滤器。Spring框架中提供的，用来动态拦截控制器方法的执行

- 作用：拦截请求，在指定的**方法调用前后**，根据业务的需求执行预先设定的代码



#### Interceptor的快速入门

1. 定义拦截器，实现`HandlerIntercetor`接口，并重写方法

   ``` java
   public class LoginInterceptor implements HandlerInterceptor {
       // 目标资源方法执行前执行，返回ture时，放行请求，返回false，拦截请求
       @Override
       public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
           return HandlerInterceptor.super.preHandle(request, response, handler);
       }
       
       // 目标资源方法执行后执行
       @Override
       public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
           HandlerInterceptor.super.postHandle(request, response, handler, modelAndView);
       }
       
       // 视图渲染完毕后执行，最后执行
       @Override
       public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
           HandlerInterceptor.super.afterCompletion(request, response, handler, ex);
       }
   }

2. 注册拦截器

   1. 创建一个配置类，实现WebMvcConfigurer接口，注册一个拦截器，并管理拦截器
   2. 把定义的拦截器添加到WebMvc的配置类中 `registry.addInterceptor(loginInterceptor)`
   3. 设置拦截的路径 `addPathPatterns("/**")`

   ```java
   @Configuration
   public class WebMvcConfig implements WebMvcConfigurer {
   
       @Autowired
       private LoginInterceptor loginInterceptor;
   
       @Override
       public void addInterceptors(InterceptorRegistry registry) {
           registry.addInterceptor(loginInterceptor)
                   .addPathPatterns("/**");
       }
   }
   ```

   

3. 拦截器路径

   | 拦截路径 | 含义     | 举例 |
   | :------: | :-----:| :--: |
   | /*       | 一级路径|      |
   | /**      | 任意级路径 |      |
   | /depts/* | /depts下的一级路径 | 能匹配到/depts/1,不能匹配到/depts/1/1、/depts |
   | /depts/** | /depts下的任意级路径 |		|
